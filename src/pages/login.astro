---
// ç²å–ç’°å¢ƒè®Šæ•¸
import { BACKEND_URL, SSO_URL, CLIENT_ID, REALM } from '../config';

if (!import.meta.env.PUBLIC_TYMB_URL) {
  throw new Error('PUBLIC_TYMB_URL ç’°å¢ƒè®Šé‡æœªè¨­ç½®');
}

const PEOPLE_IMG_URL = import.meta.env.PUBLIC_PEOPLE_IMAGE_URL;
// ä½¿ç”¨ Gateway çš„ Keycloak redirect ç«¯é»
const GATEWAY_URL = import.meta.env.PUBLIC_TYMG_URL || 'http://localhost:8082/tymg';
const redirectUri = `${GATEWAY_URL}/keycloak/redirect`;

// ç”Ÿæˆ Keycloak çš„æˆæ¬Š URL
const authorizationUrl = `${SSO_URL}/realms/${REALM}/protocol/openid-connect/auth?response_type=code&scope=openid&client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(
  redirectUri
)}`;

// é™¤éŒ¯ï¼šå°å‡ºå¯¦éš›çš„æˆæ¬Š URL å’Œ redirect_uri
console.log('=== å‰ç«¯æˆæ¬Š URL é™¤éŒ¯ ===');
console.log('GATEWAY_URL:', GATEWAY_URL);
console.log('SSO_URL:', SSO_URL);
console.log('Client ID:', CLIENT_ID);
console.log('Realm:', REALM);
console.log('Redirect URI:', redirectUri);
console.log('å®Œæ•´æˆæ¬Š URL:', authorizationUrl);

// æ³¨æ„ï¼šå·²ç§»é™¤è‡ªå‹•è·³è½‰ï¼Œæ”¹ç‚ºæ‰‹å‹•æŒ‰éˆ•è§¸ç™¼
---
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Redirecting to Login...</title>
  <script is:inline>
    // åœ¨é é¢åŠ è¼‰çš„æœ€æ—©éšæ®µæ””æˆª window.location.replace å’Œ assignï¼Œé˜²æ­¢è·³è½‰åˆ°ä¸»é 
    (function() {
      window.__TYM_LOGIN_REDIRECTING__ = false;
      
      // ä¿å­˜åŸå§‹æ–¹æ³•
      const originalReplace = window.location.replace;
      const originalAssign = window.location.assign;
      
      // æ””æˆª replace æ–¹æ³•
      window.location.replace = function(url) {
        // å¦‚æœæ­£åœ¨ç™»å…¥è·³è½‰ï¼Œä¸”ç›®æ¨™æ˜¯ä¸»é ï¼Œå‰‡é˜»æ­¢
        if (window.__TYM_LOGIN_REDIRECTING__ && url && (url.includes('/tymultiverse/') || url === '/' || url.endsWith('/tymultiverse') || url.includes(window.location.origin + '/tymultiverse'))) {
          console.log('ğŸ›¡ï¸ é˜»æ­¢ window.location.replace è·³è½‰åˆ°ä¸»é :', url);
          return;
        }
        // å…è¨±è·³è½‰åˆ° Keycloak
        if (url && (url.includes('peoplesystem.tatdvsonorth.com') || url.includes('keycloak'))) {
          console.log('âœ… å…è¨± window.location.replace è·³è½‰åˆ° Keycloak');
          return originalReplace.call(this, url);
        }
        return originalReplace.call(this, url);
      };
      
      // æ””æˆª assign æ–¹æ³•
      window.location.assign = function(url) {
        // å¦‚æœæ­£åœ¨ç™»å…¥è·³è½‰ï¼Œä¸”ç›®æ¨™æ˜¯ä¸»é ï¼Œå‰‡é˜»æ­¢
        if (window.__TYM_LOGIN_REDIRECTING__ && url && (url.includes('/tymultiverse/') || url === '/' || url.endsWith('/tymultiverse') || url.includes(window.location.origin + '/tymultiverse'))) {
          console.log('ğŸ›¡ï¸ é˜»æ­¢ window.location.assign è·³è½‰åˆ°ä¸»é :', url);
          return;
        }
        // å…è¨±è·³è½‰åˆ° Keycloak
        if (url && (url.includes('peoplesystem.tatdvsonorth.com') || url.includes('keycloak'))) {
          console.log('âœ… å…è¨± window.location.assign è·³è½‰åˆ° Keycloak');
          return originalAssign.call(this, url);
        }
        return originalAssign.call(this, url);
      };
    })();
  </script>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
      gap: 20px;
    }

    .character-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      padding: 10px;
    }

    .character-image {
      width: 80px;
      height: 80px;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
      animation: flash 2s infinite;
      opacity: 0.8;
    }

    @keyframes flash {
      0%, 100% {
        opacity: 0.8;
        transform: scale(1);
      }
      50% {
        opacity: 1;
        transform: scale(1.05);
      }
    }

    .character-image:nth-child(1) { animation-delay: 0s; }
    .character-image:nth-child(2) { animation-delay: 0.2s; }
    .character-image:nth-child(3) { animation-delay: 0.4s; }
    .character-image:nth-child(4) { animation-delay: 0.6s; }
    .character-image:nth-child(5) { animation-delay: 0.8s; }
    .character-image:nth-child(6) { animation-delay: 1s; }

    p {
      color: white;
      font-size: 18px;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
      margin: 0;
    }

    .login-button {
      padding: 16px 32px;
      font-size: 18px;
      font-weight: bold;
      color: white !important;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      border: 2px solid rgba(255, 255, 255, 0.3) !important;
      border-radius: 12px;
      cursor: pointer !important;
      box-shadow: 0 6px 25px rgba(102, 126, 234, 0.7) !important;
      transition: all 0.3s ease;
      margin: 30px auto 0 auto !important;
      text-decoration: none !important;
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      position: relative !important;
      z-index: 10000 !important;
      width: 200px !important;
      height: auto !important;
      text-align: center !important;
      font-family: Arial, sans-serif !important;
    }

    .login-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
      color: white;
      text-decoration: none;
    }

    .login-button:active {
      transform: translateY(0);
    }

    .error-button {
      cursor: not-allowed !important;
      opacity: 0.7 !important;
      background: linear-gradient(135deg, #666 0%, #999 100%) !important;
      border-color: #ff4444 !important;
    }

    .error-message {
      color: #ff6b6b;
      font-size: 14px;
      margin-top: 10px;
      text-align: center;
      display: none;
    }

    .error-message.show {
      display: block;
    }
  </style>
  <script define:vars={{ authorizationUrl, redirectUri, GATEWAY_URL, SSO_URL, CLIENT_ID, REALM }}>
    // ç«‹å³è¼¸å‡ºç’°å¢ƒè®Šæ•¸ä¿¡æ¯ï¼ˆåœ¨é é¢è¼‰å…¥æ™‚å°±è¼¸å‡ºï¼Œä¸ç­‰å¾… DOMï¼‰
    console.log('=== å‰ç«¯æˆæ¬Š URL é™¤éŒ¯ ===');
    console.log('GATEWAY_URL:', GATEWAY_URL);
    console.log('SSO_URL:', SSO_URL);
    console.log('CLIENT_ID:', CLIENT_ID);
    console.log('REALM:', REALM);
    console.log('redirectUri:', redirectUri);
    console.log('authorizationUrl:', authorizationUrl);
    console.log('å®Œæ•´æˆæ¬Š URL:', authorizationUrl);

    // æª¢æŸ¥ç’°å¢ƒè®Šæ•¸æ˜¯å¦æ­£ç¢ºè¨­ç½®
    function checkEnvironmentVariables() {
      const errors = [];
      if (!GATEWAY_URL) errors.push('GATEWAY_URL æœªè¨­ç½®');
      if (!SSO_URL) errors.push('SSO_URL æœªè¨­ç½®');
      if (!CLIENT_ID) errors.push('CLIENT_ID æœªè¨­ç½®');
      if (!REALM) errors.push('REALM æœªè¨­ç½®');
      if (!authorizationUrl) errors.push('authorizationUrl æœªç”Ÿæˆ');
      
      if (errors.length > 0) {
        const errorMsg = document.getElementById('error-message');
        if (errorMsg) {
          errorMsg.textContent = 'é…ç½®éŒ¯èª¤: ' + errors.join(', ');
          errorMsg.classList.add('show');
        }
        console.error('âŒ ç’°å¢ƒè®Šæ•¸æª¢æŸ¥å¤±æ•—:', errors);
        return false;
      }
      console.log('âœ… ç’°å¢ƒè®Šæ•¸æª¢æŸ¥é€šé');
      return true;
    }

    // åŸ·è¡Œç™»å…¥è·³è½‰ï¼ˆå¿…é ˆæ˜¯å…¨å±€å‡½æ•¸ï¼Œæ‰èƒ½è¢« onclick èª¿ç”¨ï¼‰
    function performLogin() {
      console.log('=== ğŸ” åŸ·è¡Œç™»å…¥è·³è½‰ ===');
      console.log('authorizationUrl:', authorizationUrl);
      console.log('redirectUri:', redirectUri);
      
      if (!checkEnvironmentVariables()) {
        console.error('âŒ ç’°å¢ƒè®Šæ•¸æª¢æŸ¥å¤±æ•—ï¼Œç„¡æ³•è·³è½‰');
        return;
      }

      const targetUrl = authorizationUrl;
      
      try {
        console.log('ğŸš€ æº–å‚™è·³è½‰åˆ° Keycloak...');
        console.log('ğŸ“ ç›®æ¨™ URL:', targetUrl);
        
        // ç¢ºä¿ URL å­˜åœ¨
        if (!targetUrl) {
          console.error('âŒ authorizationUrl ç‚ºç©ºï¼Œç„¡æ³•è·³è½‰');
          return;
        }
        
        // é©—è­‰ URL æ ¼å¼
        if (!targetUrl.startsWith('http://') && !targetUrl.startsWith('https://')) {
          console.error('âŒ URL æ ¼å¼éŒ¯èª¤ï¼Œä¸æ˜¯æœ‰æ•ˆçš„ HTTP/HTTPS URL:', targetUrl);
          return;
        }
        
        // ä½¿ç”¨æœ€ç›´æ¥çš„æ–¹æ³•ï¼šå‰µå»ºéš±è—çš„ <a> æ¨™ç±¤ä¸¦ç«‹å³é»æ“Š
        // é€™æ˜¯æœ€å¯é çš„æ–¹æ³•ï¼Œå› ç‚ºå®ƒæ¨¡æ“¬ç”¨æˆ¶é»æ“Šï¼Œä¸æœƒè¢«å¤§å¤šæ•¸æ””æˆªå™¨é˜»æ­¢
        console.log('ğŸ”— ä½¿ç”¨ <a> æ¨™ç±¤æ–¹æ³•è·³è½‰...');
        
        const link = document.createElement('a');
        link.href = targetUrl;
        link.style.display = 'none';
        document.body.appendChild(link);
        
        // ç«‹å³é»æ“Šï¼Œä¸å»¶é²
        link.click();
        
        // æ¸…ç†
        setTimeout(() => {
          document.body.removeChild(link);
        }, 100);
        
        console.log('âœ… è·³è½‰æŒ‡ä»¤å·²ç™¼é€');
        
        // å¦‚æœ 1 ç§’å¾Œé‚„åœ¨ç•¶å‰é é¢ï¼Œå¯èƒ½æ˜¯è¢«æ””æˆªäº†
        setTimeout(() => {
          const currentUrl = window.location.href;
          if (!currentUrl.includes('keycloak') && !currentUrl.includes('peoplesystem.tatdvsonorth.com')) {
            console.warn('âš ï¸ è·³è½‰å¯èƒ½è¢«æ””æˆªï¼Œç•¶å‰ä»åœ¨:', currentUrl);
            console.warn('âš ï¸ å˜—è©¦ä½¿ç”¨ window.location.assign...');
            
            // å‚™ç”¨æ–¹æ³•ï¼šä½¿ç”¨ window.location.assign
            try {
              window.location.assign(targetUrl);
            } catch (e) {
              console.error('âŒ window.location.assign ä¹Ÿå¤±æ•—:', e);
              
              // æœ€å¾Œå‚™ç”¨ï¼šé¡¯ç¤ºå¯é»æ“Šçš„éˆæ¥
              const errorMsg = document.getElementById('error-message');
              if (errorMsg) {
                errorMsg.innerHTML = `è·³è½‰è¢«æ””æˆªï¼Œè«‹é»æ“Šä»¥ä¸‹éˆæ¥ï¼š<br/><a href="${targetUrl}" target="_self" style="color: #667eea; text-decoration: underline; word-break: break-all; font-size: 14px;">${targetUrl}</a>`;
                errorMsg.classList.add('show');
              }
            }
          }
        }, 1000);
      } catch (error) {
        console.error('âŒ è·³è½‰å¤±æ•—:', error);
        const errorMsg = document.getElementById('error-message');
        if (errorMsg) {
          errorMsg.innerHTML = `è·³è½‰å¤±æ•—: ${error.message}<br/><a href="${targetUrl}" target="_self" style="color: #667eea; text-decoration: underline; word-break: break-all; font-size: 14px;">é»æ“Šé€™è£¡æ‰‹å‹•è·³è½‰</a>`;
          errorMsg.classList.add('show');
        }
      }
    }
    
    // åŒæ™‚è¨­ç½®ç‚º window å±¬æ€§ï¼Œç¢ºä¿å…¨å±€å¯è¨ªå•
    window.performLogin = performLogin;

    // è¨­ç½®å…¨å±€æ¨™èªŒï¼Œé˜²æ­¢å…¶ä»–ä»£ç¢¼æ””æˆªè·³è½‰
    window.__TYM_LOGIN_REDIRECTING__ = false;
    
    // åœ¨æ–‡æª”ç´šåˆ¥æ·»åŠ æ—©æœŸäº‹ä»¶ç›£è½å™¨ï¼Œé˜²æ­¢å…¶ä»–ä»£ç¢¼æ””æˆª
    // ä½¿ç”¨ capture éšæ®µå’Œæœ€é«˜å„ªå…ˆç´šï¼Œç¢ºä¿æœ€å…ˆåŸ·è¡Œ
    document.addEventListener('click', (e) => {
      const target = e.target;
      const link = target.closest ? target.closest('a#login-link') : null;
      
      if (link && link.id === 'login-link') {
        const targetUrl = link.getAttribute('data-auth-url') || authorizationUrl || link.href;
        
        // å¦‚æœæ˜¯å¤–éƒ¨ Keycloak éˆæ¥ï¼Œç«‹å³é˜»æ­¢æ‰€æœ‰å…¶ä»–è™•ç†å™¨ä¸¦è·³è½‰
        if (targetUrl && (targetUrl.includes('peoplesystem.tatdvsonorth.com') || targetUrl.includes('keycloak'))) {
          console.log('ğŸ›¡ï¸ æª¢æ¸¬åˆ°ç™»å…¥éˆæ¥é»æ“Šï¼Œé˜»æ­¢æ””æˆªä¸¦åŸ·è¡Œè·³è½‰');
          
          // è¨­ç½®æ¨™èªŒï¼Œå‘Šè¨´å…¶ä»–ä»£ç¢¼ä¸è¦æ””æˆª
          window.__TYM_LOGIN_REDIRECTING__ = true;
          
          // æ¸…é™¤å¯èƒ½å¹²æ“¾çš„ localStorage é …ï¼ˆå¦‚ lastVisitedPathï¼‰
          try {
            localStorage.removeItem('lastVisitedPath');
            localStorage.removeItem('lastVisitedTymultiverseUrl');
            console.log('ğŸ§¹ å·²æ¸…é™¤å¯èƒ½å¹²æ“¾çš„ localStorage é …');
          } catch (err) {
            console.warn('âš ï¸ æ¸…é™¤ localStorage å¤±æ•—:', err);
          }
          
          // é˜»æ­¢æ‰€æœ‰å¾ŒçºŒäº‹ä»¶è™•ç†å™¨
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
          
          // ç«‹å³åŸ·è¡Œè·³è½‰ï¼ˆä½¿ç”¨ href è€Œä¸æ˜¯ replaceï¼Œé¿å…æ­·å²è¨˜éŒ„å•é¡Œï¼‰
          console.log('ğŸš€ å¼·åˆ¶è·³è½‰åˆ°:', targetUrl);
          
          // ä½¿ç”¨å¤šç¨®æ–¹æ³•ç¢ºä¿è·³è½‰æˆåŠŸ
          try {
            // æ–¹æ³• 1: ç›´æ¥è¨­ç½® href
            window.location.href = targetUrl;
            
            // å¦‚æœ 50ms å¾Œé‚„åœ¨ç•¶å‰é é¢ï¼Œå˜—è©¦å…¶ä»–æ–¹æ³•
            setTimeout(() => {
              const currentHref = window.location.href;
              if (!currentHref.includes('peoplesystem.tatdvsonorth.com') && !currentHref.includes('keycloak')) {
                console.warn('âš ï¸ è·³è½‰å¯èƒ½å¤±æ•—ï¼Œç•¶å‰ä»åœ¨:', currentHref);
                console.warn('âš ï¸ å˜—è©¦ä½¿ç”¨ window.location.assign');
                try {
                  window.location.assign(targetUrl);
                } catch (err) {
                  console.error('âŒ window.location.assign å¤±æ•—:', err);
                  // æœ€å¾Œå˜—è©¦ï¼šå‰µå»ºè¡¨å–®æäº¤
                  const form = document.createElement('form');
                  form.method = 'GET';
                  form.action = targetUrl;
                  form.style.display = 'none';
                  document.body.appendChild(form);
                  form.submit();
                }
              }
            }, 50);
          } catch (error) {
            console.error('âŒ è·³è½‰å¤±æ•—:', error);
            // æœ€å¾Œå‚™ç”¨ï¼šé¡¯ç¤ºéŒ¯èª¤æ¶ˆæ¯
            const errorMsg = document.getElementById('error-message');
            if (errorMsg) {
              errorMsg.innerHTML = `è·³è½‰å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¨ªå•ï¼š<br/><a href="${targetUrl}" target="_blank" style="color: #667eea; text-decoration: underline; word-break: break-all; font-size: 14px;">${targetUrl}</a>`;
              errorMsg.classList.add('show');
            }
          }
        }
      }
    }, { capture: true, passive: false });

    // é é¢è¼‰å…¥æ™‚åªæª¢æŸ¥ç’°å¢ƒè®Šæ•¸ï¼Œä¸è‡ªå‹•è·³è½‰
    window.addEventListener('DOMContentLoaded', () => {
      console.log('ğŸ“„ é é¢è¼‰å…¥å®Œæˆ');
      console.log('ğŸ’¡ æç¤ºï¼šé»æ“Šã€Œé»æ“Šç™»å…¥ã€æŒ‰éˆ•é–‹å§‹ç™»å…¥æµç¨‹');
      checkEnvironmentVariables();
      
      // æª¢æŸ¥ç™»å…¥éˆæ¥çš„ href å±¬æ€§
      const loginLink = document.getElementById('login-link');
      if (loginLink) {
        console.log('ğŸ”— ç™»å…¥éˆæ¥å…ƒç´ æ‰¾åˆ°:', loginLink);
        console.log('ğŸ”— ç™»å…¥éˆæ¥ href:', loginLink.href);
        console.log('ğŸ”— authorizationUrl è®Šæ•¸:', authorizationUrl);

        // å¼·åˆ¶ç¢ºä¿æŒ‰éˆ•å¯è¦‹ - å¤šé‡ä¿éšœ
        loginLink.style.display = 'block !important';
        loginLink.style.visibility = 'visible !important';
        loginLink.style.opacity = '1 !important';
        loginLink.style.position = 'relative !important';
        loginLink.style.zIndex = '10000 !important';
        loginLink.style.width = '200px !important';
        loginLink.style.height = 'auto !important';
        loginLink.style.margin = '30px auto 0 auto !important';
        loginLink.style.border = '2px solid rgba(255, 255, 255, 0.3) !important';

        // ç¢ºä¿å…ƒç´ åœ¨ DOM ä¸­çš„ä½ç½®æ­£ç¢º
        loginLink.style.removeProperty('display');
        loginLink.style.setProperty('display', 'block', 'important');
        
        // ç¢ºä¿éˆæ¥çš„ href æ­£ç¢ºè¨­ç½®
        if (loginLink.href !== authorizationUrl && authorizationUrl) {
          console.warn('âš ï¸ éˆæ¥ href èˆ‡ authorizationUrl ä¸åŒ¹é…ï¼Œæ›´æ–°ä¸­...');
          if (loginLink.tagName === 'A') {
            loginLink.href = authorizationUrl;
          }
          loginLink.setAttribute('data-auth-url', authorizationUrl);
        }
        
        // æ·»åŠ é»æ“Šäº‹ä»¶ç›£è½å™¨ï¼ˆå‚™ç”¨ï¼Œä¸»è¦è™•ç†åœ¨æ–‡æª”ç´šåˆ¥ï¼‰
        loginLink.addEventListener('click', (e) => {
          console.log('ğŸ–±ï¸ éˆæ¥å…ƒç´ ç´šåˆ¥é»æ“Šäº‹ä»¶è§¸ç™¼');
          // æ–‡æª”ç´šåˆ¥çš„ç›£è½å™¨æ‡‰è©²å·²ç¶“è™•ç†äº†è·³è½‰
          // é€™è£¡åªè¨˜éŒ„æ—¥èªŒï¼Œä¸åŸ·è¡Œé¡å¤–æ“ä½œ
        });
      } else {
        console.error('âŒ æ‰¾ä¸åˆ°ç™»å…¥éˆæ¥å…ƒç´ ');
        // å¦‚æœæ‰¾ä¸åˆ°ï¼Œå˜—è©¦å‰µå»ºä¸€å€‹
        const body = document.body;
        if (body && authorizationUrl) {
          const newLoginLink = document.createElement('a');
          newLoginLink.id = 'login-link';
          newLoginLink.className = 'login-button';
          newLoginLink.href = authorizationUrl;
          newLoginLink.setAttribute('data-auth-url', authorizationUrl);
          newLoginLink.textContent = 'é»æ“Šç™»å…¥';
          newLoginLink.target = '_self';
          const characterContainer = document.querySelector('.character-container');
          if (characterContainer && characterContainer.nextSibling) {
            body.insertBefore(newLoginLink, characterContainer.nextSibling);
          } else {
            body.appendChild(newLoginLink);
          }
          console.log('âœ… å·²å‰µå»ºæ–°çš„ç™»å…¥éˆæ¥å…ƒç´ ');
        }
      }
    });
  </script>
</head>
<body>
  <p>è«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹ç™»å…¥</p>
  <div class="character-container">
    <img src={PEOPLE_IMG_URL + "/DraenyFighting.png"} alt="Draeny" class="character-image" />
    <img src={PEOPLE_IMG_URL + "/SoraneFighting.png"} alt="Miyu" class="character-image" />
    <img src={PEOPLE_IMG_URL + "/MedicisFighting.png"} alt="Zexu" class="character-image" />
    <img src={PEOPLE_IMG_URL + "/SamuiFighting.png"} alt="SamuiFighting" class="character-image" />
  </div>
  {authorizationUrl ? (
    <a href={authorizationUrl} class="login-button" id="login-link" target="_self" data-auth-url={authorizationUrl}>é»æ“Šç™»å…¥</a>
  ) : (
    <div class="login-button error-button" id="login-link" onclick="alert('æˆæ¬Š URL æœªç”Ÿæˆï¼Œè«‹æª¢æŸ¥ç’°å¢ƒè®Šæ•¸é…ç½®')">é»æ“Šç™»å…¥ï¼ˆé…ç½®éŒ¯èª¤ï¼‰</div>
  )}
  <div id="error-message" class="error-message"></div>
  <p style="color: #888; font-size: 12px; margin-top: 20px;">
    ğŸ’¡ æç¤ºï¼šè«‹æ‰“é–‹ç€è¦½å™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æŸ¥çœ‹è©³ç´°æ—¥èªŒ
  </p>
  <p style="color: #888; font-size: 12px; margin-top: 10px;">
    ğŸ”— æˆæ¬Š URL: <span id="auth-url-display" style="color: #667eea; word-break: break-all;">{authorizationUrl}</span>
  </p>
</body>
</html>
